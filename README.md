# Simple Bash Utils

![dayp02](resources/bashutils.png)

Разработка утилит Bash по работе с текстом: cat, grep.

## Оглавление

- [Аннотация](#аннотация) 
- [История cat](#история_cat) 
- [Использование my_cat](#использование_cat) 
- [Опциии my_cat](#опции_cat) 
- [История grep](#история_grep) 
- [Использование my_grep](#использование_grep) 
- [Опциии my_grep](#опции_grep)
- [Структура проекта](#структура_проекта) 
- [Установка и сборка](#установка-и-сборка)
- [Примеры](#примеры) 
- [Цели Makefile](#цели-makefile)

## Аннотация

Данный проект был выполнен для ознакомления с базовыми утилитами Bash по работе с текстом на языке программирования С. В качестве утилит были выбраны cat и grep, которые достаточно часто используются при работе в терминале Linux. В рамках данного проекта был получен опыт организации утилит Bash, и применения структурного подхода при разработке. 

## История cat

> cat был частью ранних версий Unix, например, Версии 1, и заменил pr, утилиту PDP-7 и Multics для копирования одного файла на экран.

## Использование my_cat

cat — одна из наиболее часто используемых команд в Unix-подобных операционных системах. Команда имеет три взаимосвязанные функции в отношении текстовых файлов: отображение, объединение их копий и создание новых.

`./my_cat [OPTION] [FILE]...`

## Опции my_cat

| № | Опция | Описание |
| ------ | ------ | ------ |
| 1 | -b, --number-nonblank | нумерует только непустые строки |
| 2 | -e | эквивалентно -vE |
| 3 | -E, --show-ends | отображает символы конца строки как $ |
| 4 | -n, --number | нумерует все выходные строки |
| 5 | -s, --squeeze-blank | сжимает несколько смежных пустых строк |
| 6 | -t | эквивалентно -vT |
| 7 | -T, --show-tabs | отображает табуляцию как ^I |
| 8 | -v, --show-nonprinting | используйте обозначения ^ и M-, за исключением LFD и TAB |
| 9 | -V, --version | выводит информацию о версии и выходит |
| 10 | --help | выводит данное описание и выходит |

## История grep 

> Томпсон написал первую версию на PDP-11 языке ассемблера, чтобы помочь Ли Э. МакМахону проанализировать текст «Записок Федералиста» и определить авторство отдельных статей. Текстовый редактор ed (также созданный Томпсоном) имел поддержку регулярных выражений, но его нельзя было использовать для такого большого объема текста, поэтому Томпсон извлек этот код в отдельный инструмент. Он выбрал это название, потому что в ed команда g / re / p печатала все строки, соответствующие заданному шаблону. 
grep впервые был включен в Версию 4 Unix. Заявив, что он «обычно упоминается как прототип программного средства», Макилрой приписал grep «безвозвратное внедрение» философии инструментов Томпсона в Unix.

## Использование my_grep 

`./my_grep [OPTION]... PATTERNS [FILE]...`

## Опции my_grep 

| № | Опция | Описание |
| ------ | ------ | ------ |
|**Pattern selection and interpretation**|
| 1 | -e, --regexp=PATTERNS | Использует PATTERNS в качестве шаблона |
| 2 | -f, --file=FILE | Берет PATTERNS из FILE  |
| 3 | -i, --ignore-case | Игнорирует различия регистра в шаблонах и данных |
|**Miscellaneous**|
| 4 | -v, --invert-match | Инвертирует смысл поиска соответствий |
| 5 | -V, --version | выводит информацию о версии и выходит |
| 6 | --help | выводит данное описание и выходит |
|**Output control**|
| 7 | -s, --no-messages | Подавляет сообщения об ошибках о несуществующих или нечитаемых файлах |
| 8 | -n, --line-number | Предваряет каждую строку вывода номером строки из файла ввода  |
| 9 | -h, --no-filename | Выводит совпадающие строки, не предваряя их именами файлов |
| 10 | -o, --only-matching | Печатает только совпадающие (непустые) части совпавшей строки |
| 11 | -l, --files-with-matches | Выводит только совпадающие файлы  |
| 12 | -c, --count | Выводит только количество совпадающих строк |

## Структура проекта

Проект имеет модульную структуру для лучшей организации кода.

```bash
    
└── SimpleBashUtils/        # Репозиторий с исходным кодом и ресурсами
    ├── cat/                # Модуль, реализующий утилиту cat
    │   ├── test/               # Директория с текстовыми файлами для тестов
    │   ├── cat_utils.c         # Модуль, реализующий парсинг и обработку опций
    │   ├── cat_utils.h         # Заголовочный файл
    │   ├── cat.c               # Основной модуль с функцией main
    │   ├── Makefile            # Управление сборкой cat
    │   └── run_test.sh         # Скрипт, реализующий тестирование cat
    ├── grep/               # Модуль, реализующий утилиту grep
    │   ├── test/               # Директория с текстовыми файлами для тестов
    │   ├── grep_utils.c        # Модуль, реализующий парсинг и обработку опций
    │   ├── grep_utils.h        # Заголовочный файл
    │   ├── pattern_utils.c     # Модуль для хранения и извлечения переданных шаблонов
    │   ├── pattern_utils.h     # Заголовочный файл
    │   ├── grep.c              # Основной модуль с функцией main
    │   ├── Makefile            # Управление сборкой grep
    │   └── run_test.sh         # Скрипт, реализующий тестирование grep        
    ├── resources/          # Каталог с ресурсами
    └── README.md           # Документация на русском
    
```

## Установка и сборка

Для сборки проекта требуется `make` и компилятор `gcc`.

1.  **Клонируйте репозиторий, перейдите в ветку Develop:**
    ```bash
    git clone [ссылка на РЕПОЗИТОРИЙ]
    ```
2. **Перейдите в каталог с интересующей вас утилитой**
    ```bash
    cd cat/
    ```
    или
    ```bash
    cd cat/
    ```

2.  **Соберите проект с помощью Makefile:**
    ```bash src%
    make all
    ```
    Исполняемый файл выбранной утилиты (`my_cat` или `my_grep`) будет создан в соответсвующей директории.

## Использование

Программа запускается из командной строки с помощью команды, указанной в соответствующем утилите пункте.

| Утилита | Запуск | Описание |
| ------ | ------ | ------ |
| cat | [Использование my_cat](#использование_cat) | [Опциии my_cat](#опции_cat) |
| grep | [Использование my_grep](#использование_grep) | [Опциии my_grep](#опции_grep) |

## Makefile цели

Цели Makefile имеют одинаковые названия для обеих утилит.

### Основные цели сборки

| Команда       | Описание                          |
|---------------|-----------------------------------|
| `make all`    | Сборка проекта                    |
| `make clean`  | Удаление собранных файлов         |
| `make rebuild`| Полная пересборка (clean + build) |


### Проверка кода

Для форматировния кода потребуется `clang-format`, исходные настройки стиля (.clang-format) прилагаются к проекту.

| Команда            | Описание                                                                        |
|--------------------|---------------------------------------------------------------------------------|
| `make format`      | Форматирование кода clang-format                                                |
| `make check-format`| Проверка стиля кода                                                             |
| `make cppcheck`    | Статический анализатор кода                                                     |
| `make valgrind`    | Анализ программы на наличие утечек памяти                                       |
| `make test`        | Запуск тестирования утилиты на базе сравнения с поведением реальной утилит Bash |

### Проверка программы

Для статического анализа кода потребуется `cppcheck` (2.7), и `valgrind` (3.18.1) - для проверки утечек памяти.

| Команда            | Описание                                                                        |
|--------------------|---------------------------------------------------------------------------------|
| `make valgrind`    | Анализ программы на наличие утечек памяти                                       |
| `make test`        | Запуск тестирования утилиты на базе сравнения с поведением реальной утилит Bash |